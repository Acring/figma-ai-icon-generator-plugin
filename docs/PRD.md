# Figma AI 图标生成插件 - 产品需求文档 (PRD)

## 文档信息

| 项目 | 内容 |
|------|------|
| 产品名称 | AI Icon Generator |
| 版本 | v1.0.0 |
| 创建日期 | 2024-12 |
| 状态 | 草案 |

---

## 1. 产品背景

### 1.1 问题陈述

设计团队在日常工作中面临以下挑战：

- **人力瓶颈**：网站/产品需要大量图标和插图，但设计团队人手有限
- **效率低下**：从零绘制一个图标/插图通常需要 1 小时以上
- **风格一致性难保证**：时间紧迫时，质量参差不齐，风格容易飘
- **通用图标库不适用**：第三方图标库难以与产品自身设计语言融合

### 1.2 解决方案

基于 [如何使用 AI 帮助设计提升图标生产效率](https://blog.acring.cn/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-ai-%E5%B8%AE%E5%8A%A9%E8%AE%BE%E8%AE%A1%E6%8F%90%E5%8D%87%E5%9B%BE%E6%A0%87%E7%94%9F%E4%BA%A7%E6%95%88%E7%8E%87-2c5be054a05a806a9a96de78d17a55f5) 文章的工作流程，开发一个 Figma 插件，将手动的「参考 SVG + 草图 + AI 生成」流程自动化：

1. **设计把控创意方向**（构图、元素、关系）
2. **AI 负责执行细节**（渐变、描边、对齐、优化）
3. **最后人工把关**（微调、检查、导出）

### 1.3 产品目标

- 将图标/插图的生产时间从 **1 小时缩短至 10 分钟**
- 确保生成的图标与现有设计系统 **风格一致**
- 提供 **无缝的 Figma 工作流集成**

---

## 2. 目标用户

### 2.1 主要用户

| 用户角色 | 描述 | 核心需求 |
|---------|------|---------|
| UI/视觉设计师 | 负责产品界面设计，需要大量图标和插图 | 快速生成风格统一的图标，减少重复劳动 |
| 品牌设计师 | 维护品牌视觉一致性 | 确保生成的图标符合品牌设计规范 |

### 2.2 次要用户

| 用户角色 | 描述 | 核心需求 |
|---------|------|---------|
| 产品经理 | 需要快速产出原型和演示 | 快速获取可用的图标素材 |
| 前端开发 | 需要 SVG 格式的图标资源 | 获取可直接使用的 SVG 代码 |

---

## 3. 用户故事

### 3.1 核心用户故事

#### US-001: 配置 API 连接
> **作为** 设计师  
> **我想要** 配置 API 连接信息（包括 API Key 和服务地址）  
> **以便** 能够使用 AI 生成功能

**验收标准：**
- [ ] 用户可以输入和保存 API Key
- [ ] 用户可以自定义 API Base URL（支持代理/中转服务）
- [ ] 提供默认的官方 API 地址（`https://api.anthropic.com`）
- [ ] API Key 和 URL 安全存储在本地（Figma clientStorage）
- [ ] 提供 API 连接验证功能（验证 URL 和 Key 的有效性）
- [ ] 支持清除/更新配置

#### US-002: 添加风格参考
> **作为** 设计师  
> **我想要** 选中 Figma 中的图标并保存为风格参考  
> **以便** AI 能够学习我的设计语言

**验收标准：**
- [ ] 用户可以选中 Figma 中的节点
- [ ] 系统自动将选中内容导出为 SVG
- [ ] 用户可以为参考添加名称和描述
- [ ] 参考保存到风格参考库中

#### US-003: 管理风格参考库
> **作为** 设计师  
> **我想要** 管理我的风格参考库  
> **以便** 复用和组织我的设计参考

**验收标准：**
- [ ] 用户可以查看所有已保存的风格参考
- [ ] 用户可以预览参考的 SVG
- [ ] 用户可以编辑参考的名称和描述
- [ ] 用户可以删除不需要的参考
- [ ] 支持选择多个参考用于生成

#### US-004: 使用草图生成图标
> **作为** 设计师  
> **我想要** 选中 Figma 中的草图，结合风格参考生成新图标  
> **以便** AI 能够按照我的构图意图生成

**验收标准：**
- [ ] 用户可以选中 Figma 中的草图/线框图
- [ ] 系统将草图导出为图片供 AI 识别
- [ ] 用户可以输入生成主题/描述
- [ ] 用户可以选择已保存的风格参考
- [ ] AI 生成符合草图构图和风格参考的 SVG
- [ ] 用户可以预览生成结果
- [ ] 用户可以输入修改意见，让 AI 基于当前结果进行迭代优化
- [ ] 支持多次迭代修改，直到用户满意
- [ ] 用户确认满意后，将 SVG 插入到 Figma 画布

#### US-005: 使用预设提示词模板
> **作为** 设计师  
> **我想要** 使用预设的提示词模板  
> **以便** 快速启动生成流程

**验收标准：**
- [ ] 系统提供常用的提示词模板
- [ ] 用户可以选择模板并自定义参数
- [ ] 用户可以创建自己的提示词模板
- [ ] 用户可以编辑和删除自定义模板

#### US-006: 查看生成历史
> **作为** 设计师  
> **我想要** 查看之前的生成历史  
> **以便** 复用成功的生成结果和提示词

**验收标准：**
- [ ] 系统自动保存每次生成的记录
- [ ] 记录包含：草图、参考、提示词、生成结果、时间
- [ ] 用户可以预览历史生成结果
- [ ] 用户可以重新使用历史记录的设置
- [ ] 用户可以将历史结果重新插入画布
- [ ] 用户可以删除历史记录

---

## 4. 功能模块

### 4.1 模块概览

```
┌─────────────────────────────────────────────────────┐
│                 AI Icon Generator                    │
├──────────┬──────────┬──────────┬──────────┬─────────┤
│  设置    │  参考库   │  生成    │  模板    │  历史   │
│ Settings │ Library  │ Generate │ Templates│ History │
└──────────┴──────────┴──────────┴──────────┴─────────┘
```

### 4.2 模块详细说明

#### 4.2.1 设置模块 (Settings)

**功能：**
- API Key 配置与验证
- 自定义 API Base URL（支持代理或兼容服务）
- 生成参数默认值设置（如输出尺寸）
- 数据导入/导出

**界面元素：**
- API Base URL 输入框（默认值：`https://api.anthropic.com`）
- API Key 输入框（密码类型）
- 验证按钮（验证 URL + Key 的有效性）
- 默认尺寸选择器
- 清除数据按钮

#### 4.2.2 风格参考库模块 (Style Library)

**功能：**
- 从 Figma 选中内容添加参考
- 参考列表管理（增删改查）
- 参考预览和详情

**界面元素：**
- "从选中添加"按钮
- 参考卡片列表（缩略图 + 名称）
- 参考详情弹窗
- 多选复选框

#### 4.2.3 生成模块 (Generate) - 核心模块

**功能：**
- 草图选择（从 Figma 选中）
- 风格参考选择
- 提示词输入
- AI 生成调用
- 结果预览与迭代修改
- 满意后插入画布

**界面元素：**
- 草图预览区域
- "从选中获取草图"按钮
- 风格参考选择器（从风格参考库中选择）
- 主题/描述输入框（支持手动输入或从提示词模板快速填充）
- 提示词模板选择器（下拉选择，选中后自动填充到描述输入框）
- 尺寸设置（宽 x 高）
- "生成"按钮
- 生成结果预览
- 修改意见输入框（用于描述需要调整的内容）
- "AI 修改"按钮（基于当前结果进行迭代优化）
- "重新生成"按钮（从头生成）
- "插入到画布"按钮

**生成流程：**
```
选择草图 → 选择风格参考 → 输入描述 → 点击生成 → 预览结果
                                                    ↓
                              ┌─────────────────────┴─────────────────────┐
                              ↓                                           ↓
                         [不满意]                                      [满意]
                              ↓                                           ↓
                    输入修改意见 → AI 修改 → 预览新结果              插入画布
                              ↑                   │
                              └───────────────────┘
                                  (可多次迭代)
```

#### 4.2.4 提示词模板模块 (Templates)

**功能：**
- 预设模板列表
- 自定义模板管理
- 模板快速应用

**预设模板示例：**
| 模板名称 | 适用场景 | 模板内容 |
|---------|---------|---------|
| 科技风图标 | 技术产品 | "生成一个科技感的图标，主题是{theme}，使用渐变和光晕效果" |
| 扁平化图标 | 通用 UI | "生成一个扁平化风格的图标，主题是{theme}，简洁清晰" |
| 插画风格 | 营销页面 | "生成一个插画风格的图形，主题是{theme}，活泼有趣" |
| 线性图标 | 工具类 | "生成一个线性图标，主题是{theme}，线条粗细统一" |

#### 4.2.5 历史记录模块 (History)

**功能：**
- 生成历史列表
- 历史详情查看
- 历史设置复用
- 历史清理

**界面元素：**
- 历史记录卡片列表
- 筛选/搜索功能
- 详情弹窗
- "重新生成"按钮
- "插入结果"按钮

---

## 5. 非功能需求

### 5.1 性能需求

| 指标 | 要求 |
|------|------|
| 插件启动时间 | < 2 秒 |
| SVG 导出时间 | < 1 秒（单个节点） |
| AI 生成响应时间 | 依赖 Claude API，预计 5-15 秒 |
| 本地数据加载 | < 500ms |

### 5.2 安全需求

| 需求 | 说明 |
|------|------|
| API Key 存储 | 使用 Figma clientStorage 本地存储，不上传服务器 |
| 数据隐私 | 所有设计数据仅在用户端和 Claude API 之间传输 |
| 敏感信息 | API Key 输入时隐藏显示 |

### 5.3 兼容性需求

| 平台 | 要求 |
|------|------|
| Figma 桌面版 | 支持 |
| Figma 网页版 | 支持 |
| 最低 Figma API 版本 | 1.0.0 |

### 5.4 可用性需求

- 界面语言：中英文双语支持（MVP 阶段可仅支持中文）
- 响应式布局：适应不同插件窗口尺寸
- 错误提示：清晰的错误信息和解决建议
- 加载状态：生成过程中显示进度反馈

---

## 6. 界面原型

### 6.1 主界面布局

```
┌──────────────────────────────────────────┐
│  AI Icon Generator           [设置按钮]  │
├──────────────────────────────────────────┤
│  [生成] [参考库] [模板] [历史]           │
├──────────────────────────────────────────┤
│                                          │
│  ┌────────────────────────────────────┐  │
│  │         草图预览区域               │  │
│  │    [点击从 Figma 选中获取草图]     │  │
│  └────────────────────────────────────┘  │
│                                          │
│  风格参考：                              │
│  ┌─────┐ ┌─────┐ ┌─────┐               │
│  │ ✓   │ │     │ │  +  │               │
│  │参考1│ │参考2│ │添加 │               │
│  └─────┘ └─────┘ └─────┘               │
│                                          │
│  主题描述：                              │
│  ┌────────────────────────────────────┐  │
│  │ 数据库集群                         │  │
│  └────────────────────────────────────┘  │
│                                          │
│  输出尺寸：  宽 [600] px  高 [400] px    │
│                                          │
│  ┌────────────────────────────────────┐  │
│  │           🚀 生成图标               │  │
│  └────────────────────────────────────┘  │
│                                          │
│  ┌────────────────────────────────────┐  │
│  │         生成结果预览               │  │
│  │                                    │  │
│  │                                    │  │
│  │   [重新生成]    [插入到画布]       │  │
│  └────────────────────────────────────┘  │
│                                          │
└──────────────────────────────────────────┘
```

### 6.2 界面尺寸建议

- **默认宽度**：360px
- **默认高度**：600px
- **最小宽度**：320px
- **最小高度**：480px

---

## 7. 发布计划

### 7.1 MVP (v1.0)

**目标：** 验证核心流程可行性

**包含功能：**
- [x] API Key 配置
- [x] 风格参考库管理
- [x] 草图选择与生成（核心）
- [x] 预设提示词模板
- [x] 生成历史记录

**预计开发周期：** 2-3 周

### 7.2 后续版本规划

| 版本 | 功能 | 优先级 |
|------|------|--------|
| v1.1 | 批量生成、多尺寸导出 | 高 |
| v1.2 | AI 模型选择（支持多个提供商） | 中 |
| v1.3 | 团队协作（共享参考库） | 中 |
| v2.0 | 插件内草图绘制工具 | 低 |

---

## 8. 成功指标

| 指标 | 目标值 | 衡量方式 |
|------|--------|---------|
| 图标生成成功率 | > 80% | 一次生成即可使用的比例 |
| 平均生成时间 | < 15秒 | 从点击生成到结果显示 |
| 用户满意度 | > 4.0/5.0 | 插件评分 |
| 日活跃用户 | 100+ | 插件使用统计 |

---

## 9. 风险与应对

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|---------|
| AI 生成质量不稳定 | 高 | 高 | 优化提示词、支持重新生成、提供编辑功能 |
| Claude API 费用高 | 中 | 中 | 用户自备 API Key、优化 token 使用 |
| SVG 解析错误 | 中 | 中 | 健壮的错误处理、提供原始代码查看 |
| Figma API 限制 | 低 | 高 | 分批处理、缓存优化 |

---

## 附录

### A. 术语表

| 术语 | 定义 |
|------|------|
| 风格参考 | 用于指导 AI 生成风格的参考 SVG |
| 草图 | 用户绘制的低保真构图，指导 AI 生成的布局 |
| 提示词 | 发送给 AI 的文本指令 |

### B. 参考资料

- [如何使用 AI 帮助设计提升图标生产效率](https://blog.acring.cn/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-ai-%E5%B8%AE%E5%8A%A9%E8%AE%BE%E8%AE%A1%E6%8F%90%E5%8D%87%E5%9B%BE%E6%A0%87%E7%94%9F%E4%BA%A7%E6%95%88%E7%8E%87-2c5be054a05a806a9a96de78d17a55f5)
- [Figma Plugin API 文档](https://www.figma.com/plugin-docs/)
- [Claude API 文档](https://docs.anthropic.com/claude/reference/getting-started-with-the-api)

